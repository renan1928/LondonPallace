/**
 * Carlos Alberto Junior (carlosjrcabello@gmail.com)
 * http://www.carlos.inf.br
 */
jQuery.fn.money=function(q,r){if(!q){q="[###.]###,##"}r=r?r:'right';var s=this;s.bind('keyup',function(e){var a=s.val();var b="";var c="";var d="#";var f="|";var g="";a=jQuery.trim(a);if(a==""){return a}var h=q.split(f);var k=1000;var l=a;for(var i=0;i<a.length;i++){if(!isNaN(a.substr(i,1))){b=b+a.substr(i,1)}}a=b;for(var i=0;i<h.length;i++){var m="";var n=0;for(var j=0;j<h[i].length;j++){if(h[i].substr(j,1)=="]"){h[i]=h[i].substr(j+1);break}if(n==1){m=m+h[i].substr(j,1)}if(h[i].substr(j,1)=="["){n=1}}for(var j=0;j<a.length;j++){h[i]=m+h[i]}}if(h.length==1){g=h[0];var o="";for(var j=0;j<g.length;j++){if(g.substr(j,1)==d){o=o+d}}tam=o.length}else{for(var i=0;i<h.length;i++){o="";for(var j=0;j<h[i].length;j++){if(h[i].substr(j,1)==d){o=o+d}}if(a.length>o.length){if(k>(a.length-o.length)){k=a.length-o.length;g=h[i];tam=o.length}}else if(a.length<o.length){if(k>(o.length-a.length)){k=o.length-a.length;g=h[i];tam=o.length}}else{g=h[i];tam=o.length;break}}}if(a.length>tam){a=a.substr(0,tam)}else if(a.length<tam){var p="";var j=a.length;for(var i=g.length-1;i>=0;i--){if(j==0){break}if(g.substr(i,1)==d){j--}p=g.substr(i,1)+p}g=p}j=g.length-1;for(var i=a.length-1;i>=0;i--){if(g.substr(j,1)!=d){c=g.substr(j,1)+c;j--}c=a.substr(i,1)+c;j--}s.val(c)});s.bind('change',function(e){if(s.val().length==0){s.val("0,00")}else{if(s.val().length==1){s.val(s.val()+",00")}}});s.attr('style','text-align:'+r+';')};